# 07 함께모으기

> 코드와 모델을 밀접하게 연관시키는 것은 코드에 의미를 부여하고 모델을 적절하게 한다

- 개념 관점
  - 도메인 안에 존재하는 개념과 개념들 사이의 관계를 표현
  - 도메인이란 사용자들이 관심을 가지고 있는 특정 분야나 주제를 말하며 소프트웨어는 도메인에 존재하는 문제를 해결하기 위해 개발된다

- 명세 관점
  - 도메인 개념이 아니라 객체들의 책임에 초점을 맞추게 된다
  - 객체의 인터페이스를 바라보게 된다

- 구현 관점
  - 실제 작업을 수행하는 코드와 연관되어 있다
  - 객체들이 책임을 수행하는 데 필요한 동작하는 코드를 작성하는 것


- 클래스는 개념, 인터페이스, 구현을 함께 드러내야 한다

- 역할, 책임, 협력을 이용해 객체의 인터페이스를 식별했다
- 협력에 참여하기 위해 객체가 수신해야 하는 메시지를 결정하고 메시지들이 모여 객체의 인터페이스를 구성한다는 점을 기억해라

- 검은색으로 속이 찬 마름모 = 포함관계 또는 합성관계
  - 하나의 단위(하나의 라이프사이클)로 생성 또는 삭제된다

- 선으로 연결 = 연관관계
  - 한 타입이 다른 타입의 일부가 아니므로 합성관계는 아닌 관계
  - 단순히 아는? 관계다 (예를들면 메서드의 파라미터 라든가? 반환값 이라든가?)

### 설계란 적절한 객체에게 적절한 책임을 할당하는 것!!!!


- 객체가 메시지를 선택하는게 아니라 메시지가 객체를 선택하게 한다
  - 선 메시지 선택, 후 메시지를 수신하기에 적절한 객체를 선택

- 메시지를 처리할 객체를 찾고 있다면? 먼저 도메인 모델안에 책임을 수행하기에 적절한 타입이 존재하는지 살펴보라
  - 적절한 타입을 발견했다면 책임을 수행할 객체를 그 타입의 인스턴스로 만들어라

- 예시
  - 손님이 커피를 주문하는 도중에 스스로 할 수 없는게 뭘까?
  - 스스로 할수 없는게 있다면 다른 객체에게 부탁(요청)하자
  - 이 요청이 바로 손님 객체에서 외부로 전송되는 메시지를 정의한다

  - 메뉴 항목을 찾을 책임을 누구에게 할당할까?
  - 메뉴항목을 가장 잘 알고 있는 객체에게 할당하는 것이 적절한 것이다

- 객체가 수신한 메시지가 객체의 인터페이스를 결정한다
  - 객체가 수신 가능한 메시지만 추려내면 객체의 인터페이스가 된다

- 중요한 것은 설계가 아니라 코드다. 따라서 너무 오랜시간 설계하지 말고 최대한 빨리 코드를 구현해서 설계에 이상이 없는지 판단해라

- MenuItem 의 목록을 Menu 의 속성으로 포함시킨다
  - 객체의 속성은 객체의 내부 구현에 속하기 때문에 캡슐화 되어야 한다
  - 객체의 속성이 캡슐화된다는 이야기는 인터페이스에는 객체의 내부 속성에 대한 어떤 힌트도 제공되면 안된다는 것
  - 이를 위한 좋은 방법은 인터페이스를 정하는 단계에서는 객체가 어떤 속성을 가지는지, 또 그 속성이 어떤 자료 구조로
  구현됐는지를 고려하지 않는 것이다
  - 객체에게 책임을 할당하고 인터페이스를 결정할 때는 가급적 객체 내부의 구현에 대한 어떤 가정도 하지 말아야 한다
  - 객체가 어떤 책임을 수행해야 하는지를 결정한 후에야 책임을 수행하는 데 필요한 객체의 속성을 결정하라

- 설계를 간단히 끝내고 빨리 구현에 들어가라
  - 테스트 주도 설계로 코드를 구현하는 사람들이 하는 작업이 바로 테스트 코드를 작성해 가면서 협력을 설계한다

- 코드는 세가지 관점을 모두 제공해야 한다
  - 개념 관점 : 도메인
    - 변경을 쉽게, 유지보수성을 향상시키기 위해서는 현실 세계를 반영하려고 노력해라
    - 도메인 클래스와의 간격이 좁을수록 기능을 변경하기 위해 뒤적거려야 하는 코드의 양이 적어진다
  - 명세 관점 : 인터페이스
    - 공용 인터페이스는 외부의 객체가 해당 객체에 접근할 수 있는 유일한 부분
    - 인터페이스를 수정하면 해당 객체와 협력하는 모든 객체에게 영향을 미친다
    - 인터페이스를 만들 때 구현과 관련된 세부사항이 드러나지 않게 해라
  - 구현 관점 : 내부 구현
    - 메서드와 속성이 철저하게 클래스 내부로 캡슐화되어야 한다는 것을 의미한다

- 도메인 개념을 참조해라
  - 도메인 지식을 기반으로 코드의 구조와 의미를 쉽게 유추할 수 있게 해라
  - 그러면 유지보수성이 좋아진다

- 인터페이스와 구현을 분리해라
  - 변경이 쉬워진다
  - 캡슐화를 위반해서 구현을 인터페이스 밖으로 노출해서도 안된다

